<!DOCTYPE html>
<html lang="fr">
<%- include("../templates/head") -%>
<body>
  <%- include("../templates/header") -%>
  <main>
    <article>
      <h1>Panier</h1>
      <div id="shopping-cart-container">
        <table class="table shopping-cart-table">
          <thead>
            <tr>
              <th></th>
              <th>Produit</th>
              <th>Prix unitaire</th>
              <th>Quantit√©</th>
              <th>Prix</th>
            </tr>
          </thead>
          <tbody>
            <% for (let product of productList) { %>
              <tr data-product-id=<%- product.id %>>
                <td><button class="remove-item-button" title="Supprimer"><i class="fa fa-times"></i></button></td>
                <td><a href="/produits/<%- product.id %>>"><%- product.name %></a></td>
                <td><%- formatPrice(product.price) %></td>
                <td>
                  <div class="row">
                    <div class="col">
                      <button title="Retirer" disabled=""><i class="fa fa-minus"></i></button>
                    </div>
                    <div class="col"><%- product.quantity %></div>
                    <div class="col">
                      <button title="Ajouter"><i class="fa fa-plus"></i></button>
                    </div>
                  </div>
                </td>
                <td><%- product.total %></td>
              </tr> 
            <% } %>
          </tbody>
        </table>
        <p class="shopping-cart-total">Total: <strong id="total-amount"></strong></p>
        <a class="btn pull-right" href="./commande">Commander <i class="fa fa-angle-double-right"></i></a>
        <button class="btn" id="remove-all-items-button"><i class="fa fa-trash-o"></i>&nbsp; Vider le panier</button>
      </div>
    </article>
  </main>
  <%- include("../templates/footer") -%>
  <script type="module">
    import { initShoppingCartController } from "/assets/scripts/shopping-cart.controller.js";
    import { initProductController } from "/assets/scripts/products.controller.js"
    initShoppingCartController();
    initProductController();
  </script>
</body>
</html>
